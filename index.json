[{"categories":null,"content":" My name is Georgi Demirev. I like working with data and building models. Below is a short CV. ","date":"2021-01-17","objectID":"/about/:0:0","tags":null,"title":"About Me","uri":"/about/"},{"categories":null,"content":"Work Experience 2018-present Founder at appraiser.ai. In 2018 I founded a machine learning startup aiming to automate the property appraisal process. 2018-2020 Data Scientist at Boehringer-Ingelheim. I worked for BI as an independent data science contractor, working on campaign evaluation and sales forecasting. 2016-2017 Data Scientist at GemSeek. In GemSeek I was involved in various ML projects for large multinatinal clients. 2015-2016 Data Modeller at Experian. I developed credit risk models and scorecards for UK financial institutions. ","date":"2021-01-17","objectID":"/about/:0:1","tags":null,"title":"About Me","uri":"/about/"},{"categories":null,"content":"Academic Background 2017-2018 MA Econ from Universitat Pompeu Fabra. I have a masters degree in economics from UPF Barcelona. 2018-2020 BA Econ at Sofia University. My undergrad degree is from Sofia University ","date":"2021-01-17","objectID":"/about/:0:2","tags":null,"title":"About Me","uri":"/about/"},{"categories":null,"content":"Tech Skills R - I am a fairly proficient R user, having used the language extensively for data wrangling, modelling, web scraping, dashboard building, package development (and creating this website). I organize the local R User Group and have trained multiple employees/trainees in using the language. python - I have substantial experience using python for data-science-related tasks, including building DL models with pytorch. SQL, Mongo - Experience with working with various database setups. Docker, bash, GCloud - I have experience building and orchestrating complex MLOps pipelines SAS, MATLAB - Some professional experience for computational modelling with proprietary tools such as SAS and MATLAB ","date":"2021-01-17","objectID":"/about/:0:3","tags":null,"title":"About Me","uri":"/about/"},{"categories":["thoughts"],"content":"Разхвърляни мисли за влиянието на вируталния живот върху истинския","date":"2021-01-16","objectID":"/2021-01-12-social-media-and-polarization/","tags":["thoughts"],"title":"Социалните мрежи и политическата поляризация","uri":"/2021-01-12-social-media-and-polarization/"},{"categories":["thoughts"],"content":"Гледайки събитията от САЩ, си мисля доста за влиянието на социалните мрежи върху гражданското общество и политическия диалог. Като цяло заключенията ми са доста мрачни. Note TLDR: Начинът, по който говорим за политика във фейсбук и туитър ни тласка към все повече поляризация и конфликти. Причините са няколко и са директен резултат от дизайна и фичърите на платформи от този тип: Трибуна за най-противоречивите мнения. Знаем, че публикациите, които будят силни емоции и най-вече гняв, са тези, които се споделят най-много и събират най-много реакции. Тези публикации в последствие провокират ядосани реакции от несъгласните с тях, от които пък най-голям отзвук отново получават най-противоречивите, които пък на свой ред провокират контра реацкии… безкраен цикъл на хейт и контра-хейт. Емоции преди факти. Когато сме ядосани или провокирани от нещо, често чувствата ни изпреварват мисълта. Затова не рядко иначе разумни хора споделят фалшиви новини или разпространяват откровени измислици. При дефицита на внимание, от който страдаме всички онлайн, малцина се занимават с проверяване на източници или търсене на допълнителен контекст. В пъти по-лесно да изречеш невярно твърдение, отколкото да опровергаеш такова. Или както казва старата поговорка - лъжата обикаля интернета три пъти преди истината да си върже обувките. Преувеличаване като за последно. В среда на постоянно изобилие от информация е трудно да изпъкнеш. Ако искаш някой изобщо да обърне внимание на мнението ти, се налага да предозираш. Всеки проблем се представя като потенциален апокалипсис. Всяко действие, с което не сме съгласни, е ‘краят на демокрацията’, ‘смъртта на цивилизования свят’, ‘по-лошо от нацистите’ и т.н. Резултатът е, че всякакъв нюанс бива премахнат, оставяйки единствено кресливи лозунги. Разделяне на агитки. Полу-анонимността в социалните мрежи прави много лесно смесването на всички с горе-долу сходни политически идеи в един единствен колективен образ. Просто е по-трудно да възприемаме това, което четем, като мнение на отделни личности, когато срещу нас не седи човек в реалния свят, а само име и профилна снимка. В паметта ни всички мнения се сливат в малък на брой архетипи - консерватора, либерала, социалиста и т.н. И тъй като почти всичко, което четем онлайн и вбесяващо и крайно (точка 1), то колективните образи на политическите ни опоненти се превръщат в карикатури (или поне в мемове). Ехо камерите. Всички обичаме да се чувстваме част от някаква общност и да получаваме някакъв вид социално одобрение. Затова се събираме в ехо камери - групи от хора, мислещи като нас самите, нашата си ‘агитка’. В тези ехо камери всичко негативно за другия лагер и всичко позитивно за своя се повтаря и усилва стократно, превръщайки карикатурата в гротеска. Всяко ‘външно’ мнение придобива статута на богохулство. Спор за пред публика. Веднъж приели политически си възгледи като част от своята идентичност и билет за принадлежност към социалната си група, то нищо вече не може да ни накара да си променим мнението и всеки спор става излишен. И въпреки това социалните мрежи са пълни със спорове между членовете на различните ‘агитки’. Те не спорят за да открият истината или за да убедят противника в нещо, а за да намерят одобрението на собствената си група. Затова много бързо спора се свежда до това кой ще измисли по-остроумна обида или кой пръв ще постне сойджак меме с лицето на отсрещната страна. Веднъж стигнали до такова делене на ‘племена’, до насилието в истинския живот остава съвсем малко. Еволюционните инстинкти, които сме придобили през хилядолетията в саваната, са ни научили да бъдем просоциални с нашата си група и безжалостни към всеки външен. Има твърде много примери в човешката история за жестока, нерационална и непримирима омраза, завършили с кръвопролития - хугеноти и католици във Франция, Туци и Хуту в Руанда, ‘Зелени’ и ‘Сини’ във Визанитя… За жалост това е процес с позитивна обратна връзка - имаме склонност да намираме оправдания за злосторниците от собствения си лагер и в същ","date":"2021-01-16","objectID":"/2021-01-12-social-media-and-polarization/:0:0","tags":["thoughts"],"title":"Социалните мрежи и политическата поляризация","uri":"/2021-01-12-social-media-and-polarization/"},{"categories":["models"],"content":"Some experiments with epidemiology models","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"As a follow up to my last couple of posts, this is a detailed description of the agent based pandemic model I built on top of work by Adam Kucharski et al. as a self-learning exercise. Note Code for this project can be found at https://github.com/demirev/2020-cov-abm ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:0:0","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Model Description - Agent-Based Pandemic Model The model simulates a population of agents divided in households and workplaces who interact (and expose each other to the disease) on a daily basis. There are four types of agents based on their age group: children adults middle-aged pensioners Every individual belongs to a household. The distribution of household in terms of age makeup and size is determined by the user. Adults and Middle-aged agents are also assigned to workplaces. Children are assigned to ‘classrooms’ with other children. Pensioners are not assigned to a workplace. The simulation progresses in ‘days’. It begins with a small number of infected individuals defined by the user. Each day the infected agents interact with others who become exposed to infection: I assume that the infected agent meets a number randomly drawn agents from their workplace as well as a number of randomly drawn agents from the population at large. The number of meetings is determined for each infected agent by drawing an observation from the interaction data set from the Pandemic study by Krepac et al. Exposed agents face a certain user-defined probability of becoming infected (see section on default parameters). I assume that infected agents also expose everyone from their own household (at least in the baseline scenario with no interventions). Exposed household members also face a user-defined probability of becoming infectious. For convenience this exposure is done on day 1 of the infection, so this probability should be thought of as the total probability that an exposed household member gets infected throughout the infectious period. The next day the newly infected agents are added to the list of disease-spreaders and the simulation is carried over again. A simple *SIR status is kept for each agent: This means that as the disease progresses, the number of susceptible individuals in the population, but also in individual households and workplaces will decrease, and the disease will naturally slow down at some point (note: this will tend to happen earlier because of the compartmentalization of agents into households and workplaces compared to a simulation without this complication). Throughout the simulation a record is kept of who infected who when. This allows us to compute the effective average reproduction number at each time point. The basic interaction rules described above can be altered by specifying a disease-preventing non-pharmaceutical intervention, which I will cal ‘policies’ for short. The list of available policies is given below. It is the same set of interventions as in Kucharski et al. no_measures - the baseline scenario. isolation_only - individuals who test positive are isolated and can no longer infect. Only a fraction of infectious agents will get tested each day. hh_quarantine_only - in addition to the above, individuals in the household of the ones who tested positive are traced, tested and isolated if needed (i.e. they don’t contribute to spreading the infection further). hh_work_only - as above plus same treatment of coworkers. isolation_manual_tracing_met_only - all contacts are traced (household, work and other) as long as they were contact known to the infected individual beforehand (this is an adjustable parameter). The idea is that in manual tracing you cannot trace stranger. isolation_manual_tracing_met_limit - same as above but also imposing a hard limit on number of social interaction outside the household or work (akin to social distancing measures) isolation_manual_tracing - assume every contact can be traced (including those that were strangers to the infected individual) cell_phone - tracing using smartphone app. Same as isolation_manual_tracing (phone apps allow to trace strangers) but limited by number of people owning a phone. cell_phone_met_limit - same as above plus a hard limit on outside of work and home interactions. pop_testing - random testing on a certain fraction of the population each ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:1:0","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Possible Future Extensions Obviously some aspects of disease spread are simplified in this model. However some complications can be introduced relatively easily. Namely the duration of the disease is currently fixed but can be made variable and dependent on age. SIR groups can be augmented with additional status groups to model hospital admission, ICU care, death or lose of immunity (and the transition between groups can be made dependent on age). ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:2:0","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Example I will give a short example of how to use the model and the code. It is the same one that can be found in the file scripts/contact_abm_model.R ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:3:0","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Defining social behavior of each age group Each age group in the model meets with other people based on interaction data such as the one provided by Fry et al. The first step is to define this interaction distribution: # load contacts data contacts \u003c- bind_rows( read_csv(\"data/contact_distributions_u18.csv\") %\u003e% mutate(age = \"student\"), read_csv(\"data/contact_distributions_o18.csv\") %\u003e% mutate(age = \"adult\"), read_csv(\"data/contact_distributions_o18.csv\") %\u003e% mutate(age = \"middle_age\"), read_csv(\"data/contact_distributions_o18.csv\") %\u003e% mutate(age = \"pensioner\") %\u003e% mutate(e_work = 0) # pensioners don't work ) This is a little coarse since I only have data for over/under 18 rather than for more detailed age brackets, but this can be remedied in the future ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:3:1","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Creating a population of agents The next step is to create a population of agents for the model. This is done by listing household types and the number of such households to include in the simulation. # define initial population init_pop \u003c- generate_population( household_distribution = list( tibble(n = 100000, student = 0, adult = 2, middle_age = 0, pensioner = 0), tibble(n = 100000, student = 1, adult = 2, middle_age = 0, pensioner = 0), tibble(n = 10000, student = 2, adult = 2, middle_age = 2, pensioner = 2), tibble(n = 50000, student = 0, adult = 0, middle_age = 0, pensioner = 2) ), average_workplace_size = 40, average_classroom_size = 25 ) In principle this should be available from census data. We also need to define the number of initial infected individuals in each age group: # define initial infected individuals init_inf \u003c- generate_initial_infected( init_pop, n_initial_infections = c( \"student\" = 5, \"adult\" = 5, \"middle_age\" = 5, \"pensioner\" = 5 ), contact_distribution = contacts ) ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:3:2","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Simulating outbreaks The main workhorse function of the model is simulate_pandemic_policy_sequence. It takes the initial population defined above and simulates a sequence of different intervention policies for a specified number of days. Below I simulate the baseline policy for $120$ days. Note the format of the policy_sequence parameter. simulation_baseline \u003c- simulate_pandemic_policy_sequence( initial_population = init_pop, initial_infected = init_inf, initial_recovered = tibble(individual_id = \"\")[0,], policy_sequence = list(list(scenario = \"no_measures\", n_days = 120)), contact_distribution = contacts ) The code is somewhat time consuming, with this simulation loop taking around 11-12 minutes on my personal laptop. The resulting data allows us to plot the different SIR groups through time: Or just the number of infected individuals at each day: . Finally we can plot the effective reproduction number at each day (the plot is noisy in the beginning and end of the simulation due to having only a few infected individuals at those times): ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:3:3","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Simulating the effect of different interventions To compare different interventions, I will run one simulation for each intervention scenario, where first the disease spreads unchecked for $20$ days and then the intervention is put in place for $100$ days: simulation_all_scenarios \u003c- c( \"isolation_only\",\"hh_quaratine_only\",\"hh_work_only\", \"isolation_manual_tracing_met_only\",\"isolation_manual_tracing_met_limit\", \"isolation_manual_tracing\",\"cell_phone\",\"cell_phone_met_limit\", \"pop_testing\",\"pt_extra\" ) %\u003e% future_map(function(scn) { simulate_pandemic_policy_sequence( initial_population = init_pop, initial_infected = init_inf, initial_recovered = tibble(individual_id = \"\")[0,], policy_sequence = list( list(scenario = \"no_measures\", n_days = 20), # assume 20 days before measures are taken list(scenario = scn, n_days = 100) # let simulation run for total of 120 days ), contact_distribution = contacts ) }) We can now compare the total number of infected (with possible implications for the burden to the healthcare system) for each scenario: The plot clearly shows that some policies are much more effective than others and some can even lead to disease eradication in these simulations. This is furthers confirmed by looking at $R_t$ for each simulation and noting that it falls well below $1$ for some of them (the plot is noisy at times because of the low number of infected agents at the beginning and end of disease spread): ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:3:4","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Multiple simulations and non-trivial policy schedules The above plots show the results of running the simulation only once per scenario. Since there is inherent randomness in such models, it is better to conduct several simulations and average the results. This can be done through the simulate_pandemic_policy_sequence_ntimes function, which as the name suggests is just a wrapper around simulate_pandemic_policy_sequence that repeats the simulation for a specified number of times. simulation_specific_policy \u003c- simulate_pandemic_policy_sequence_ntimes( initial_population = init_pop, initial_infected = init_inf, initial_recovered = tibble(individual_id = \"\")[0,], policy_sequence = policy, n_times = 8, # run 8 simulations of the same policy contact_distribution = contacts ) One can also use this model to simulate an arbitrary sequence of intervention policies (e.g. a regime of on-and-off social distancing or a policy of initial manual tracing later replaced by cell phone tracing). To do this just define a policy list as the one below (specifying the duration in days of each policy): policy \u003c- list( list(scenario = \"no_measures\", n_days = 10), list(scenario = \"hh_quaratine_only\", n_days = 20), list(scenario = \"hh_work_only\", n_days = 20), list(scenario = \"isolation_manual_tracing_met_only\", n_days = 20), list(scenario = \"cell_phone\", n_days = 20), list(scenario = \"pop_testing\", n_days = 30) ) Plotting the outputs of simulate_pandemic_policy_sequence_ntimes will show the result of each simulation as well as the average across simulations: ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:3:5","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Default simulation parameters inf_period = 5, # Infectious period max_low_fix = 4, # Social distancing limit in scenarios with hard limit wfh_prob = 0, # Probability people are working from home trace_prop = 0.95, # Proportion of contacts traced app_cov = 0.53, # App coverage prob_symp = 0.6, # Proportion symptomatic prob_t_asymp = 0.5, # Transmission probability if asymptotic isolate_distn = c(0,0.25,0.25,0.2,0.3,0), # distribution of time to isolate in the scenarios with isolation (1st day presymp) pt_extra = 0, # Optional extra transmission intervention probability pt_extra_reduce = 0, # Reduction from extra intervention hh_risk = 0.2, # HH risk (total) cc_risk = 0.06, # Outside HH contact risk (per daily exposure) trace_adherence = 0.9, p_pop_test = 0.05, # Proportion mass tested (5% per week) trace_hh = 1, # Proportion of household members traced in scenarios involving tracing. met_before_w = 0.79, # Proprotion of meetings which are with familiar people at work. At school = 90% met_before_h = 1, # Within HH met_before_o = 0.52 # In other settings ","date":"2020-05-10","objectID":"/2020-05-10-agent-based-pandemic-model/:4:0","tags":["models"],"title":"Playing Around with Epi Models - Part 2","uri":"/2020-05-10-agent-based-pandemic-model/"},{"categories":["models"],"content":"Some experiments with epidemiology models","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"As a follow up to my last post, this is a detailed description of the SEIR model I built on top of work by Alsion Hill as a self-learning exercise. Note Code for this project can be found here, while an interactive dashboard is available here. ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:0:0","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Model Description - Age-specific SEIR Model Individuals in this model are split up into $A$ age groups and 9 classes. All individuals start in the susceptible ($S$) class. Then they pass through two exposed class $E0$ and $E1$, where once in the second class they become infectious. Infected indivduals can be either asymptomatic ($I0$), mild ($I1$), severe ($I2$) or critical ($I3$). Alls of them can transmit the disease and all of them can either pass to the next stage or heal. Critical cases face a probability of dying and transitioning to the $D$ class. Recovered individuals transit to the $R$ class where they are immune. Optionally the user can specify a probability of losing immunity and transitioning back to the $S$ class. Thet transition dynamics are presented below: Individuals age at a rate ensuring they spend the correct time in their age bracket. The aging rate for age bracket $i$ is defined as $1$ over the length of the bracket (and $0$ for the oldest bracket). In addition the user can specify a background non-epidemic death rate. In that case I also introduce a birth rate to keep the population constant. The death rate is the same across age groups in the dashboard (although in the source code it need not be) so it only serves to introduce a new flow of susceptibles and a possible endemic equilibrium. The differential equations that governs the system are given below: ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:1:0","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"ODE System ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:2:0","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Equations $\\dot{S^{i}} = -\\beta_{e}\\sum_{j \\in 1:A}w^{i,j}_e E_1^j \\frac{S^i}{n^i} \\sigma(t) -\\beta_{0}\\sum_{j \\in 1:A}w^{i,j}_0 I_0^j \\frac{S^i}{n^i} \\sigma(t)-\\beta_{1}\\sum_{j \\in 1:A}w^{i,j}_1 I_1^j \\frac{S^i}{n^i} \\sigma(t)-\\beta_{2}\\sum_{j \\in 1:A}w^{i,j}_2 I_2^j \\frac{S^i}{n^i} \\sigma(t)-\\beta_{3}\\sum_{j \\in 1:A}w^{i,j}_3 I_3^j \\frac{S^i}{n^i} \\sigma(t) +\\alpha^{i-1} S^{i-1} -\\alpha^i S^i - \\eta_{-}^{i} S + \\eta_{+}^{i} \\sum_{j \\in 1:A}n^i +\\phi R^i$ $\\dot{E_0^i} = \\beta_{e}\\sum_{j \\in 1:A}w^{i,j}_e E_1^i \\frac{S^i}{n^i} \\sigma(t) +\\beta_{0}\\sum_{j \\in 1:A}w^{i,j}_0 I_0^i \\frac{S^i}{n^i} \\sigma(t) + \\beta_{1}\\sum_{j \\in 1:A}w^{i,j}_1 I_1^i \\frac{S^i}{n^i} \\sigma(t) + \\beta_{2}\\sum_{j \\in 1:A}w^{i,j}_2 I_2^i \\frac{S^i}{n^i} \\sigma(t) + \\beta_{3}\\sum_{j \\in 1:A}w^{i,j}_3 I_3^i \\frac{S^i}{n^i} -\\epsilon_0 E_0^i \\sigma(t) +\\alpha^{i-1} E_0^{i-1} -\\alpha^i E_0^i - \\eta_{-}^{i} E_0^i$ $\\dot{E_1^i} = \\epsilon_0 E_0^i - \\epsilon_1 E_1^i + \\alpha^{i-1} E_1^{i-1} - \\alpha^i E_1^i -\\eta_{-}^{i}E_1^i$ $\\dot{I_0^i} = f\\epsilon_1 E_1^i - \\gamma_0 I_0^i + \\alpha^{i-1} I_0^{i-1} - \\alpha^i I_0^i -\\eta_{-}^i I_0^i$ $\\dot{I_1^i} = (1-f)\\epsilon_1 E_1^i - \\gamma_1 I_1^i - \\theta_1 I_1^i + \\alpha^{i-1} I_1^{i-1} - \\alpha^i I_1^i -\\eta_{-}^i I_1^i$ $\\dot{I_2^i} = \\theta_1 I_1^i - \\gamma_2 I_2^i - \\theta_2 I_2^i + \\alpha^{i-1} I_2^{i-1} - \\alpha^i I_2^i -\\eta_{-}^i I_2^i$ $\\dot{I_3^i} = \\theta_2 I_2^i - \\gamma_3 I_3^i - \\mu I_3^i + \\alpha^{i-1} I_3^{i-1} - \\alpha^i I_3^i -\\eta_{-}^i I_3^i$ $\\dot{R^i} = \\gamma_1 I_1^i + \\gamma_2 I_2^i + \\gamma_3 I_3^i - \\phi R^i + \\alpha^{i-1} R^{i-1} - \\alpha^i R^i -\\eta_{-}^i R^i$ $\\dot{D^i} = \\mu I^i_3$ Where $i$ takes values in $1:A$ (i.e. one for each age group). Dotted values denote time derivatives. ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:2:1","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Variables All variables below are vectors of length $A$, where the $i$-th element represents the number of that class in the $i$-th age group. $S$: Susceptible individuals $E_0$: Exposed to the virus but not yet infectious or symptomatic $E_1$: Exposed to the virust, already infectious but not yet symptomatic $I_0$: Infected individuals with no symptoms. These individuals can pass the virus but they do not pass to the more critical categories and will always heal completely at some point. $I_i$: Infected individuals in severity class $i$. Severity increases with $i$ and we assume individuals must pass through all previous classes $I_1$: Mild infection $I_2$: Severe infection $I_3$: Critical infection $R$: individuals who have recovered from disease and are now immune $D$: Dead individuals ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:2:2","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Parameters $\\beta_e$ probability of infection given contact between individual of class $E_1$ and a susceptible individual. $\\beta_i$ probability of infection given contact between individual of class $I_i$ and a susceptible individual. $w_{e}^{i,j}$ daily average number of contacts between an exposed individual of age group $i$ and age group $j$. The defintion for $w_0^{i,j}$, $w_1^{i,j}$, $w_2^{i,j}$, $w_3^{i,j}$. All these variables can be organised into matrices $W_e$, $W_0$, $W_1$, $W_2$, and $W_3$. $\\eta_{-}$ vector of per age outside probability of unrelated death (in this dashboard all elements are the same) $\\eta_{+}$ vector of birth rates. Everything except the first element is $0$ since all individuals are born in the first group $\\alpha$ vector of aging rates. We define $\\alpha^0$ to be $0$, and $X^0$ to be $0$ for all vectors $X $\\epsilon_0$ probability of progression from class $E_0$ to $E_1$ $\\epsilon_i$ probability of progression from $E_1$ to $I_0$ or $I_1$ $f$ fraction of progressed cases from $E1$ to $I_0$ (the complementary fraction $1-f$ progresses to $I_1$) $\\gamma_i$ rate at which infected individuals in class $I_i$ recover from disease and become immune $\\theta_i$ rate at which infected individuals in class $I_i$ progress to class $I_{i+1}$ $\\mu$ death rate for individuals in the most severe stage of disease $\\sigma(t)$: Seasonal multiplier at time $t$. All probabilities and rates are per day. ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:2:3","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Linking the model parameters to real-world disease specifics ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:3:0","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Clinical stages Mild infection - Hospitalization is not required (though in many countries such individuals are also hospitalized) Severe infection - Hospitalization and supplemental oxygen are generally required. Critical infection - Treatment in an ICU, often with mechanical ventilation, is required. ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:3:1","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Relating clinical observations to model parameters To determine the model parameters consistent with current clinical data, we collect the following values from the slider values chosen by the user, and then use the formulas below to relate them to the rate parameters in the model. Note that the slider inputs for time intervals are average durations. IncubPeriod: Average incubation period, days DurMildInf: Average duration of mild infections, days FracMild: Average fraction of (symptomatic) infections that are mild FracSevere: Average fraction of (symptomatic) infections that are severe FracCritical: Average fraction of (symptomatic) infections that are critical CFR: Case fatality rate (fraction of infections that eventually result in death) DurHosp: Average duration of hospitalization (time to recovery) for individuals with severe infection, days TimeICUDeath: Average duration of ICU admission (until death or recovery), days (Note g=$\\gamma$) a=1/IncubPeriod g1=(1/DurMildInf)*FracMild theta1=(1/DurMildInf)-g1 g2=(1/DurHosp)-theta2 theta2=(1/DurHosp)*(FracCritical/(FracSevere+FracCritical)) mu=(1/TimeICUDeath)*(CFR/FracCritical) g3=(1/TimeICUDeath)-mu eta1=1/PresymPeriod eta0=(IncubPeriod-PresymPeriod)^(-1) f=FracAsym g0=1/DurAsym We = W W0 = W W1 = ContactFractionMild * W W2 = ContactFractionSevere * W W3 = ContactFractionCritical * W Where $W$ is the contact matrix of healthy individuals defined by the inputs in the contacts tab. I assume exposed and asymptomatics don’t change their contact behavior, while infections of different severity only conduct a fraction of the contacts of healthy individuals due to being sick at home or in hospital. The fractions are defined by the user. ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:3:2","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Assumptions This model is formulated as a system of differential equations and the output therefore represents the expected values of each quantity. It does not take into account stochastic events, and so the epidemic cannot go extinct even when it gets to very low values (except when an intervention is stopped, at which case the number of individuals in each state is rounded to the nearest integer). The model does not report the expected variance in the variables, which can sometimes be large. Individuals must pass through a mild stage before reaching a severe or critical stage Individuals must pass through a severe stage before reaching a critical stage Only individuals in a critical stage die All individuals of a single age group have equal transmission rates and equal susceptibility to infection ","date":"2020-04-16","objectID":"/2020-04-16-age-specific-seir-model/:4:0","tags":["models"],"title":"Playing Around with Epi Models - Part 1","uri":"/2020-04-16-age-specific-seir-model/"},{"categories":["models"],"content":"Some experiments with epidemiology models","date":"2020-04-12","objectID":"/2020-04-12-playing-around-with-epi-models/","tags":["models"],"title":"Playing Around with Epi Models - Part 0","uri":"/2020-04-12-playing-around-with-epi-models/"},{"categories":["models"],"content":"Learning about epidemiology Like most of you I knew next to nothing about epidemiology until a month ago. And also like most of you I am suddenly stuck at home with a lot of free time at my hands. And since it seems that in the next few months epidemiology will play a huge role in informing decision that can impact many thousands of lives, I decided that it may be a good idea to study the subject a bit in order to be able to have better informed opinions. My plan was two-fold: first to go through a book on the topic, and then to find one or two mini-projects to practice what I’ve read. I got a hold of this book, which contained some useful code snippets. As for projects, I wanted to find some models that were a) recently created by respected epidemiologists so that I was dealing with the real stuff instead of toy examples, and b) came with open-source code so I could tweak or modify it. ","date":"2020-04-12","objectID":"/2020-04-12-playing-around-with-epi-models/:1:0","tags":["models"],"title":"Playing Around with Epi Models - Part 0","uri":"/2020-04-12-playing-around-with-epi-models/"},{"categories":["models"],"content":"Age-specific SEIR model The first model I was able to find that suited my goal was this useful and accessible dashboard by Alison Hill at Harvard’s Program for Evolutionary Dynamics. It is a SEIR-type model that splits the population into susceptible, exposed but not infectious, exposed and infectious, asymptomatic carriers, three different severity levels of cases (mild, severe or hospitalized, and critical or ICU-bound), dead and recovered groups. The model already had a good deal of complexity, and a lot of effort had gone into choosing sensible parameter values based on available clinical data. One thing that was not included in it however was a split-by age of the population. Since COVID seems to be impacting people of various ages quite differently, it seems that incorporating an age structure into such a model would be a useful thing to do. That is what I set out to do. The end result can be found here. At this point the interface was getting a bit clunky, but it is still fully intractable and all parameters can be adjusted. The main difference from the original is that in my version the key parameters are vectors (one entry per age group) instead of scalars. You can go ahead and check out the app or read the detailed description of the model in this post. ","date":"2020-04-12","objectID":"/2020-04-12-playing-around-with-epi-models/:2:0","tags":["models"],"title":"Playing Around with Epi Models - Part 0","uri":"/2020-04-12-playing-around-with-epi-models/"},{"categories":["models"],"content":"Agent Based Model of the Pandemic The next model that I stumbled on is this paper by Kucharski et al. It simulates individual-level transmission in various scenarios (at home, at work, at school, or other settings) while imposing various non-pharmaceutical interventions (such as mobile app tracking, household quarantine, manual tracing etc). Instead of focusing on a single individual as in the original paper, I extended this model to simulate tens of thousands of individuals split into different households, workplaces, and class-rooms (depending on their age). The agents then interact with each other driven by specified encounter probabilities within their household and work/school. The effect is that this model creates a sort of local pool of susceptibles (the household or the workplace/schoolroom). This result is somewhat smaller reproductive number estimates compared to a random mixing model. You can read more about this model on github or the detailed write-up in this blog post. ","date":"2020-04-12","objectID":"/2020-04-12-playing-around-with-epi-models/:3:0","tags":["models"],"title":"Playing Around with Epi Models - Part 0","uri":"/2020-04-12-playing-around-with-epi-models/"},{"categories":["thoughts"],"content":"Some thoughts on COVID and non-pharmaceutical interventions","date":"2020-03-16","objectID":"/2020-03-16-social-distancing-and-behavioiral-fatigue/","tags":["thoughts"],"title":"Social Distancing and Behavioural Fatigue","uri":"/2020-03-16-social-distancing-and-behavioiral-fatigue/"},{"categories":["thoughts"],"content":"Note Big Disclaimer: I am not an epidemiologist or in any other way qualified to make judgments on effective disease prevention and containment. This post is just a layman’s attempt to understand the actions and choices of some of the world’s governments and should not be taken as advice or expert opinion. ","date":"2020-03-16","objectID":"/2020-03-16-social-distancing-and-behavioiral-fatigue/:0:0","tags":["thoughts"],"title":"Social Distancing and Behavioural Fatigue","uri":"/2020-03-16-social-distancing-and-behavioiral-fatigue/"},{"categories":["thoughts"],"content":"How do you contain a pandemic? The rapid spread of the ongoing coronavirus pandemic has caught governments and health authorities around the world off-guard. As various emergency emergency measures are placed in hold, it is becoming evident that different countries are choosing different strategies to contain the disease. The goal of pretty much all of these strategies at this point is social distancing - the reduction in frequency of contact between members of society so as to slow down the spread of the virus. However, there are stark difference in the severity and the timing of measures adopted by different governments. On one hand you have a number of countries (such as Spain and France) that are implementing severe restrictions on everyday activity such as declaring school vacations, closing off bars and restaurants, canceling mass cultural events etc. Other countries (most notably the UK) however are only (as of midday 16.03.20) hinting at the possibility of enacting such measures in the future and limit their current actions to softer measures such as PSAs and certain travel restrictions. What is the rationale being the strategy of the UK? The main stated reason is so called ‘behavioral fatigue’ - the idea that adherence to harsh distancing policies deteriorates with time, as people ‘tire out’, lose the sense of urgency or are unable to put off their jobs and obligations any more. Under this theory the government has to be careful in their decision to impose strict isolation rules, as doing so too early may mean that the measures become less effective in the future, when they could be even more necessary. UK authorities have stated that their strategy is based on computational simulations of disease propagation. In this post I attempt to build a very simple toy model to illustrate that under certain assumptions holding off extreme measures until the most opportune moment is the right thing to do. ","date":"2020-03-16","objectID":"/2020-03-16-social-distancing-and-behavioiral-fatigue/:1:0","tags":["thoughts"],"title":"Social Distancing and Behavioural Fatigue","uri":"/2020-03-16-social-distancing-and-behavioiral-fatigue/"},{"categories":["thoughts"],"content":"The effectiveness of social distancing Let’s first begin by setting up a simple simulation model. I assume a fixed population comprised of $N$ citizens. Each citizen can be either healthy, sick or recovered. The simulation is split up into phases or ‘days’. Each day each citizen has a fixed probability ($p_{contact}$) of having close contact and potentially transmitting the disease to exactly one other citizen. The disease is non-lethal and lasts for a fixed number of days ($t_d$). After this the citizen becomes recovered and can no longer contact the disease. The simulation is carried out for $T$ days and I record the total number of active cases at the beginning of each day. import random random.seed(110011) class Citizen(): status = 'healthy' sick_for = 0 def simulate_epidemic( population_size = 1000, simulation_length = 100, meeting_probability = 0.1, sickness_duration = 21 ): population = [Citizen() for i in range(population_size)] population[0].status = 'sick' # patient 0 daily_sick = [] for day in range(simulation_length): n_sick = [1 if citizen.status == 'sick' else 0 for citizen in population] daily_sick.append(sum(n_sick)) for citizen in population: if random.uniform(0, 1) \u003c meeting_probability: other_citizen = random.choice(population) if citizen.status == 'sick' and other_citizen.status != 'recovered': other_citizen.status = 'sick' elif other_citizen.status == 'sick' and citizen.status != 'recovered': citizen.status = 'sick' if citizen.status == 'sick': citizen.sick_for += 1 if citizen.status == 'sick' and citizen.sick_for \u003e= sickness_duration: citizen.status = 'recovered' return(daily_sick) The effect of implementing successful social distancing measures can be represented in our model by a lower probability of interaction between citizens ($p^∗_{contact}\u003c$p_{contact}). Let’s run two simulations each consisting of population of size $N=10000$ for a total of $T=300$ days, where the disease lasts for $t_d=21$ days. The only difference between the two will be the rate of social interaction with $p_{contact}=0.1$ representing the base scenario, and $p^*_{contact}=0.04$ representing social distancing. simulation_no_isolation = simulate_epidemic( population_size = 10000, simulation_length = 300, meeting_probability = 0.1, sickness_duration = 21 ) simulation_isolation = simulate_epidemic( population_size = 10000, simulation_length = 300, meeting_probability = 0.04, sickness_duration = 21 ) Plotting the resulting total cases per day in both scenarios shows a familiar graph, illustrating that social distancing can drastically reduce the maximum number of cases per day, and spread out the disease over time, thus limiting the stress on healthcare systems. No Fatigue Simulationepidemic simulation without fatigue \" epidemic simulation without fatigue ","date":"2020-03-16","objectID":"/2020-03-16-social-distancing-and-behavioiral-fatigue/:2:0","tags":["thoughts"],"title":"Social Distancing and Behavioural Fatigue","uri":"/2020-03-16-social-distancing-and-behavioiral-fatigue/"},{"categories":["thoughts"],"content":"Behavioural Fatigue and not jumping the gun Now let’s try to model behavioural fatigue. For this I will assume that social distancing measures can be effective for only a limited period - $t_{iso}$. During isolation the interaction rate is $p^∗_{contact}\u003cp_{contact}$ otherwise it is $p_{contact}$. The crucial thing thus becomes choosing when to enforce strict distancing measures. I will assume that measures are imposed when the total number of active cases reaches a certain proportion of the total population $P_{trigger}$. I also assume that those measures can be enacted only once (and after $t_{iso}$ days the interaction rate returns to its original value until the end of the simulation). def simulate_epidemic_fatigue( population_size = 1000, simulation_length = 100, meeting_probability_base = 0.1, meeting_probability_isolation = 0.04, sickness_duration = 21, isolation_duration = 14, isolation_trigger = 0.01 ): population = [Citizen() for i in range(population_size)] population[0].status = 'sick' # patient 0 daily_sick = [] days_in_isolation = 0 for day in range(simulation_length): n_sick = [1 if citizen.status == 'sick' else 0 for citizen in population] daily_sick.append(sum(n_sick)) if days_in_isolation == 0: if sum(n_sick) \u003e= (isolation_trigger * population_size): days_in_isolation = 1 meeting_probability = meeting_probability_isolation else: meeting_probability = meeting_probability_base elif days_in_isolation \u003c isolation_duration: days_in_isolation += 1 meeting_probability = meeting_probability_isolation else: meeting_probability = meeting_probability_base for citizen in population: if random.uniform(0, 1) \u003c meeting_probability: other_citizen = random.choice(population) if citizen.status == 'sick' and other_citizen.status != 'recovered': other_citizen.status = 'sick' elif other_citizen.status == 'sick' and citizen.status != 'recovered': citizen.status = 'sick' if citizen.status == 'sick': citizen.sick_for += 1 if citizen.status == 'sick' and citizen.sick_for \u003e= sickness_duration: citizen.status = 'recovered' return(daily_sick) I will simulate two different policies - one enforces strict distancing measures as soon as the total number of cases reaches $2$ of the population, the other only when it reaches $30$. In both cases the measures last for $t_{iso}=14$ days while the disease takes $t_{d}=21$ days to be cured. Other than that the two simulations are the same as before ($N=10000$, $p_{contact}=0.1$, $p^∗_{contact}=0.04$, $T=300$). simulation_early_trigger = simulate_epidemic_fatigue( population_size = 10000, simulation_length = 300, meeting_probability_base = 0.1, meeting_probability_isolation = 0.04, sickness_duration = 21, isolation_duration = 14, isolation_trigger = 0.02 ) simulation_delayed_trigger = simulate_epidemic_fatigue( population_size = 10000, simulation_length = 300, meeting_probability_base = 0.1, meeting_probability_isolation = 0.04, sickness_duration = 21, isolation_duration = 14, isolation_trigger = 0.30 ) The results of the simulations are plotted below. Under these assumptions acting too early has postponed the peak of the epidemic, but the maximum number of cases is almost as high as in the base scenario above. Delaying the strict measures on the other hand has done almost nothing in terms of postponing the peak, but the maximum number of cases is lower that the ‘act too early’ scenario. Fatigue Simulationepidemic simulation with fatigue \" epidemic simulation with fatigue In this case the ‘acting too early’ scenario is no more that a postponement of the epidemic (under these assumptions the disease cannot die out due to $t_d \u003e t_{iso}$). The ‘delayed measures’ scenario allows for the population to develop some degree of herd immunity before implementing the measures (since in this model once recovered a citizen can no longer carry the disease). ","date":"2020-03-16","objectID":"/2020-03-16-social-distancing-and-behavioiral-fatigue/:3:0","tags":["thoughts"],"title":"Social Distancing and Behavioural Fatigue","uri":"/2020-03-16-social-distancing-and-behavioiral-fatigue/"},{"categories":["thoughts"],"content":"So what’s the better strategy? I wrote this post mostly to convince myself that the claims of the UK officials about why they aren’t acting faster in response to COVID19 can be justified by some simulation model. This doesn’t mean that anything written here carries over to the real world. The models described here are extremely simple (no deaths, no seasonal effect, limited interactions, fixed illness duration, same behavior if ill or not, etc., etc.) and for illustration purposes only. Even these simplest of models still rely on many assumptions, most of which I made without much thought (and some of them I choose to better underline my point). The idea of beheviour fatigue is controversial to say the least, and we still don’t know enough about COVID19, how it progresses and whether recovered patients do in fact become immune or not. The professional epidemiologist who are fighting the pandemic undoubtedly have access to the highly advanced models, carefully developed for years, where each assumption is justified and defensible. Let’s trust that they use these tools and their knowledge to make the best decisions for all our sake. ","date":"2020-03-16","objectID":"/2020-03-16-social-distancing-and-behavioiral-fatigue/:4:0","tags":["thoughts"],"title":"Social Distancing and Behavioural Fatigue","uri":"/2020-03-16-social-distancing-and-behavioiral-fatigue/"}]